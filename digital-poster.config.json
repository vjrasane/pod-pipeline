{
  "workDir": "{cwd}",
  "steps": [
    {
      "step": "for-each-file",
      "dir": "{input}",
      "steps": [
        {
          "step": "chat",
          "name": "naming",
          "prompt": {
            "source": "file",
            "path": "prompts/naming.txt"
          },
          "output": {
            "storage": "variable",
            "name": "propername"
          },
          "maxTokens": 25
        },
        {
          "step": "for-each-value",
          "name": "crop",
          "values": ["2x3", "3x4", "4x5", "11x14", "ISO"],
          "steps": [
            {
              "step": "crop",
              "aspectRatio": "{value}",
              "input": "{filepath}",
              "output": "{vars.propername}/{value}{ext}"
            }
          ]
        }
      ]
    }
  ]
}
